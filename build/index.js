!function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={exports:{},id:r,loaded:!1};return e[r].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function r(o,u){try{var i=t[o](u),s=i.value}catch(e){return void n(e)}return i.done?void e(s):Promise.resolve(s).then(function(e){r("next",e)},function(e){r("throw",e)})}return r("next")})}}var u=n(5),i=r(u),s=n(18),a=r(s),l=n(20),c=r(l),f=n(6),d=r(f),p=n(11),v=r(p),m=n(12),y=r(m),g=n(10),h=r(g),b=(0,i.default)();!function(){var e=o(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,h.default)();case 2:return e.next=4,(0,v.default)(t);case 4:return e.next=6,(0,y.default)(t);case 6:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}()(b);var x=process.env.PORT||3e3,w=process.env.HTTPS_PORT||3443;if(a.default.createServer(b).listen(x),console.log("http happens on port "+x),d.default.existsSync("./cert/server.pfx")){var _={pfx:d.default.readFileSync("./cert/server.pfx"),passphrase:""};c.default.createServer(_,b).listen(w),console.log("https happens on port "+w)}},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(){function e(){n(this,e),this.result={result:0,message:"message",data:{}}}return r(e,[{key:"getResult",value:function(){return this.result}}]),e}();t.default=o},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),u=r(o),i=n(13),s=r(i),a=(new u.default).getResult(),l=new s.default;t.default={init:function(){return{initExec:!1,routes:[{method:"get",url:"/dbData/:collectin"},{method:"get",url:"/dbData/:collectin/:id"},{method:"post",url:"/dbData/:collectin"},{method:"put",url:"/dbData/:collectin/"},{method:"delete",url:"/dbData/:collectin/:id"}]}},exec:function(e,t){var n=e.body,r=e.params,o=e.query,u=r.collectin;switch(a.data={},e.method.toLowerCase()){case"get":var i=Number.parseInt(o.skip)?Number.parseInt(o.skip):0,s=Number.parseInt(o.limit)?Number.parseInt(o.limit):20,c=void 0===o.sort?{}:JSON.parse(o.sort),f=void 0,d={};void 0!==r.id?f={_id:r.id}:d={skip:i,limit:s,sort:c},l.select(u,f,d,function(e,n){e?(a.result=0,a.message=e.message):(a.result=1,a.message="get data successfully",a.data=n),t.json(a)});break;case"post":l.insert(u,n,function(e,n){e?(a.result=0,a.message=e.message):(a.result=1,a.message="insert data successfully",a.data=n.ops),t.json(a)});break;case"put":l.update(u,n.where,n.set,function(e,n){e?(a.result=0,a.message=e.message):(a.result=1,a.message="update data successfully"),t.json(a)});break;case"delete":if(void 0===r.id)a.result=0,a.message="no id value",t.json(a);else{var p={_id:r.id};l.delete(u,p,function(e,n){e?(a.result=0,a.message=e.message):(a.result=1,a.message="delete data successfully"),t.json(a)})}}}}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),u=r(o),i=(new u.default).getResult();t.default={init:function(){return{initExec:!1,routes:[{method:"get",url:"/"},{method:"post",url:"/"}]}},exec:function(e,t){e.body,e.params,e.query,i.result=1,i.message="message",i.data={},t.json(i)}}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(22),s=r(i),a=n(23),l=r(a),c=n(19),f=r(c),d=function(){function e(){o(this,e);var t=function(){return(0,f.default)().format("YYYY-MM-DD HH:mm:ss:SSS")},n=new l.default({name:"info",filename:"./logs/info.log",timestamp:t,level:"info",colorize:!0,datePattern:".yyyy-MM-dd"}),r=new l.default({name:"error",filename:"./logs/error.log",timestamp:t,level:"error",colorize:!0,datePattern:".yyyy-MM-dd"});this.logger=new s.default.Logger({transports:[n,r]})}return u(e,[{key:"getLog",value:function(){return this.logger}}]),e}();t.default=d},function(e,t){e.exports=require("express")},function(e,t){e.exports=require("fs")},function(e,t){e.exports=require("path")},function(e,t){e.exports=require("util")},function(e,t,n){function r(e){return n(o(e))}function o(e){return u[e]||function(){throw new Error("Cannot find module '"+e+"'.")}()}var u={"./dbData":2,"./dbData.js":2,"./index":3,"./index.js":3};r.keys=function(){return Object.keys(u)},r.resolve=o,e.exports=r,r.id=9},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return new Promise(function(e,t){global.log=(new u.default).getLog(),e()})};var o=n(4),u=r(o)},function(e,t,n){(function(e){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(t){return new Promise(function(n,r){var o=f.default.normalize(e+"/..");t.use(l.default.json()),t.use(l.default.urlencoded({extended:!0})),t.use((0,s.default)({secret:"yueyquweyuqeyuoeyoqydasdas!@##%%",resave:!0,saveUninitialized:!0})),t.use((0,p.default)()),t.use(u.default.static(o+"/public")),t.use(function(e,t,n){t.header("Access-Control-Allow-Origin","*"),t.header("Access-Control-Allow-Headers","Content-Type, Content-Length, Authorization, Accept, X-Requested-With"),t.header("Access-Control-Allow-Methods","PUT, POST, GET, DELETE, OPTIONS"),n()}),n()})};var o=n(5),u=r(o),i=n(17),s=r(i),a=n(15),l=r(a),c=n(7),f=r(c),d=n(16),p=r(d)}).call(t,"app")},function(e,t,n){(function(e){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function r(o,u){try{var i=t[o](u),s=i.value}catch(e){return void n(e)}return i.done?void e(s):Promise.resolve(s).then(function(e){r("next",e)},function(e){r("throw",e)})}return r("next")})}}function u(e){return new Promise(function(t,r){a.default.readdir(v,function(r,o){var u=!0,i=!1,s=void 0;try{for(var a,c=o[Symbol.iterator]();!(u=(a=c.next()).done);u=!0){var f=a.value;if(".DS_Store"!==f){var d=n(9)("./"+f).default,p=d.init(),v=p.routes,m=p.initExec;if(void 0!==m&&!m&&(0,l.isArray)(v)&&v.length>0){var y=!0,g=!1,h=void 0;try{for(var b,x=v[Symbol.iterator]();!(y=(b=x.next()).done);y=!0){var w=b.value,_=w.url.toLowerCase();w.method.toLowerCase(),e[w.method.toLowerCase()](_,d.exec)}}catch(e){g=!0,h=e}finally{try{!y&&x.return&&x.return()}finally{if(g)throw h}}}else void 0!==m&&m&&d.exec()}}}catch(e){i=!0,s=e}finally{try{!u&&c.return&&c.return()}finally{if(i)throw s}}t()})})}function i(e){return new Promise(function(t,n){e.get("*",function(e,t){t.status(404).send({result:0,errorcode:"404",message:"route not found",data:{}})}),e.use(function(e,t,n,r){log.error(e),n.status(500).send({result:0,errorcode:"500",message:"server error",data:{}})}),t()})}Object.defineProperty(t,"__esModule",{value:!0}),n(14);var s=n(6),a=r(s),l=n(8),c=n(1),f=r(c),d=n(7),p=r(d),v=((new f.default).getResult(),p.default.resolve(e,"../api"));t.default=function(){var e=o(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,u(t);case 3:return e.next=5,i(t);case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:return e.prev=10,e.abrupt("return",new Promise(function(e,t){e(null)}));case 13:case"end":return e.stop()}},e,this,[[0,7,10,13]])}));return function(t){return e.apply(this,arguments)}}()}).call(t,"app")},function(e,t,n){(function(e){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(8),s=n(4),a=r(s),l=n(21)().Db,c=((new a.default).getLog(),function(){function t(){o(this,t),this.db=new l(e,{nativeObjectID:!0})}return u(t,[{key:"select",value:function(e,t,n,r){var o={},u=void 0,s=void 0,a=n.sort;if(void 0!==t?(o=t,u=s=0):(u=void 0!==n.limit&&Number.isInteger(n.limit)?n.limit:20,s=void 0!==n.skip&&Number.isInteger(n.skip)?n.skip:0),void 0!==a&&(0,i.isObject)(a))for(var l in a)(!Number.isInteger(a[l])||1!==a[l]&&a[l]!==-1)&&(a[l]=-1);else a={_id:-1};var c=this.db.collection(e);c.find(o).skip(s).limit(u).sort(a).toArray(function(e,t){r(e,t)})}},{key:"insert",value:function(e,t,n){var r=(0,i.isArray)(t)?t:[t],o=this.db.collection(e);o.insert(r,function(e,t){n(e,t)})}},{key:"update",value:function(e,t,n,r){n={$set:n};var o=this.db.collection(e);o.update(t,n,function(e,t){r(e)})}},{key:"delete",value:function(e,t,n){var r=this.db.collection(e);r.remove(t,function(e,t){n(e,t)})}}]),t}());t.default=c}).call(t,"class")},function(e,t){e.exports=require("babel-polyfill")},function(e,t){e.exports=require("body-parser")},function(e,t){e.exports=require("compression")},function(e,t){e.exports=require("express-session")},function(e,t){e.exports=require("http")},function(e,t){e.exports=require("moment")},function(e,t){e.exports=require("spdy")},function(e,t){e.exports=require("tingodb")},function(e,t){e.exports=require("winston")},function(e,t){e.exports=require("winston-daily-rotate-file")}]);